(this["webpackJsonptrello-clone-react"]=this["webpackJsonptrello-clone-react"]||[]).push([[0],{16:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o}));var r="SET_CARDS",c="ADD_CARDS",a="REMOVE_CARDS",o={setCards:function(e){return{type:r,payload:e}},addCard:function(e){return{type:c,payload:e}},removeCard:function(e,t){return{type:a,payload:{columnIndex:e,cardIndex:t}}}}},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return f}));var r=n(6),c=n.n(r),a=n(15),o=n(26),s=n.n(o),u=n(16),i=n(8),d=s.a.create({baseURL:"https://trello.backend.tests.nekidaem.ru/api/v1/"});d.interceptors.request.use(function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.getItem("token"))&&(t.headers.Authorization="JWT ".concat(n)),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){throw 401!==e.response.status&&403!==e.response.status||document.location.reload(),e}));var l=function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.get("cards/");case 3:n=e.sent,t(u.d.setCards(n.data)),t(Object(i.d)()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.detail);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e,t){return function(){var n=Object(a.a)(c.a.mark((function n(r){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.post("cards/",{row:e,text:t});case 3:a=n.sent,r(u.d.addCard(a.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),alert(n.t0.response.data.text[0]);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},b=function(e,t,n){return function(){var r=Object(a.a)(c.a.mark((function r(a){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.delete("/cards/".concat(e,"/"));case 3:a(u.d.removeCard(t,n)),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),alert(r.t0.response.data);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()},f=function(e,t,n,r){return function(){var o=Object(a.a)(c.a.mark((function a(o){return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,d.patch("/cards/".concat(e,"/"),{row:t,seq_num:n,text:r});case 3:o(l()),c.next=9;break;case 6:c.prev=6,c.t0=c.catch(0),alert(c.t0.response.data);case 9:case"end":return c.stop()}}),a,null,[[0,6]])})));return function(e){return o.apply(this,arguments)}}()}},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),c=(n(0),n(20)),a=n(28),o=(n(79),n(1)),s=function(e){var t=e.cardIndex,n=e.columnIndex,s=e.children,u=e.onRemove,i=e.cardID,d=e.cardSeqNum;return"undefined"!==typeof t?Object(o.jsx)(c.b,{draggableId:"card-".concat(n,"-").concat(t),index:t,children:function(e,t){return Object(o.jsxs)("div",Object(r.a)(Object(r.a)(Object(r.a)({className:"card",ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[Object(o.jsxs)("div",{children:["id ".concat(i," "),"sqn ".concat(d)]}),Object(o.jsxs)("div",{className:"card__text",children:[Object(o.jsx)("div",{children:s}),Object(o.jsx)("div",{onClick:u,className:"remove-btn",children:Object(o.jsx)("img",{src:a.a,alt:"Clear svg icon"})})]})]}))}}):Object(o.jsx)("div",{className:"card",children:s})}},28:function(e,t,n){"use strict";t.a=n.p+"static/media/clear.4ac10f93.svg"},35:function(e,t,n){},44:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(27),c=n(4),a=n(21),o=n(1),s=function(t){var n=t.columnIndex,s=t.cardIndex,u=t.children,i=t.cardID,d=t.cardSeqNum,l=Object(c.d)((function(e){return e.cards})),j=Object(c.c)();return Object(o.jsx)(r.a,{children:u,items:l,cardIndex:s,columnIndex:n,onRemove:function(){e.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")&&j(Object(a.c)(i,n,s))},cardID:i,cardSeqNum:d})}}).call(this,n(34))},55:function(e,t,n){},58:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return u}));var r="INIT_USER",c="SET_USER",a="LOGOUT",o=function(){return{type:r}},s=function(){return{type:c}},u=function(){return{type:a}}},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(18),a=n.n(c),o=n(17),s=n(5),u=n(4),i=n(8),d=n.p+"static/media/avatar.1af8adc2.svg",l=(n(55),n(1)),j=function(){var e=Object(u.d)((function(e){return e.users.isAuth})),t=Object(u.c)();return Object(l.jsx)("div",{className:"navbar",children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(o.b,{to:"/",className:"navbar__logo",children:Object(l.jsx)("div",{className:"navbar__header",children:"Trello"})}),!e&&Object(l.jsx)("div",{className:"navbar__login",children:Object(l.jsx)(o.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})}),!e&&Object(l.jsx)("div",{className:"navbar__registration",children:Object(l.jsx)(o.b,{to:"/registration",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),e&&Object(l.jsx)("div",{className:"navbar__login",onClick:function(){return t(Object(i.e)())},children:"\u0412\u044b\u0445\u043e\u0434"}),e&&Object(l.jsx)(o.b,{to:"/",children:Object(l.jsx)("img",{className:"navbar__avatar",src:d,alt:""})})]})})},b=n(10),f=(n(35),n(3)),p=n(47),O=(n(58),["type","value","placeholder","error","className","onChange","onChangeText","onBlur","onKeyPress","onEnter","spanClassName"]),m=function(e){var t=e.type,n=e.value,r=e.placeholder,c=e.error,a=e.className,o=e.onChange,s=e.onChangeText,u=e.onBlur,i=e.onKeyPress,d=e.onEnter,j=e.spanClassName,b=Object(p.a)(e,O),m="error ".concat(j||""),v="input ".concat(c?"errorInput":""," ").concat(a);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",Object(f.a)({type:t,value:n,onChange:function(e){o&&o(e),s&&s(e.currentTarget.value)},onKeyPress:function(e){i&&i(e),d&&"Enter"===e.key&&d()},onBlur:function(e){u&&u(e)},placeholder:r,className:v},b)),c&&Object(l.jsx)("div",{className:m,children:c})]})},v=n(6),h=n.n(v),x=n(15),g=n(26),y=n.n(g).a.create({baseURL:"https://trello.backend.tests.nekidaem.ru/api/v1/"}),N=(n(78),function(e){var t=e.children,n=e.onClick,r=e.className;return Object(l.jsx)("button",{className:r,onClick:n,children:t})}),_=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(b.a)(a,2),s=o[0],d=o[1],j=Object(r.useState)(""),f=Object(b.a)(j,2),p=f[0],O=f[1],v=Object(r.useState)(""),g=Object(b.a)(v,2),_=g[0],C=g[1],I=Object(r.useState)(""),k=Object(b.a)(I,2),w=k[0],S=k[1],E=Object(r.useState)(""),A=Object(b.a)(E,2),R=A[0],D=A[1],T=Object(u.c)(),q=function(){!n&&C("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0438\u043c\u044f!"),!s&&S("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 Email!"),!p&&D("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!")};return Object(l.jsxs)("div",{className:"authorization",children:[Object(l.jsx)("div",{className:"authorization__header",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(l.jsx)(m,{value:n,onChange:function(e){var t=e.currentTarget.value.trim();t?(c(t),_&&C("")):(c(""),C("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0438\u043c\u044f!"))},onBlur:q,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f...",error:_}),Object(l.jsx)(m,{value:s,onChange:function(e){var t=e.currentTarget.value.trim();t?(d(t),w&&S("")):(d(""),S("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 Email!"))},onBlur:q,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email...",error:w}),Object(l.jsx)(m,{value:p,onChange:function(e){var t=e.currentTarget.value.trim();t?(O(t),R&&D("")):(O(""),D("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"))},onBlur:q,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c...",error:R}),Object(l.jsx)(N,{className:"authorization__btn",onClick:function(){T(function(e,t,n){return function(){var r=Object(x.a)(h.a.mark((function r(c){var a;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y.post("users/create/",{username:e,email:t,password:n});case 3:a=r.sent,alert("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u0430!"),localStorage.setItem("token",a.data.token),c(Object(i.f)()),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),alert("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435!"),console.log(r.t0.response.data);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(n,s,p)),c(""),d(""),O("")},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},C=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(b.a)(a,2),s=o[0],d=o[1],j=Object(r.useState)(""),f=Object(b.a)(j,2),p=f[0],O=f[1],v=Object(r.useState)(""),g=Object(b.a)(v,2),_=g[0],C=g[1],I=Object(u.c)(),k=function(){!n&&O("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0438\u043c\u044f!"),!s&&C("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!")};return Object(l.jsxs)("div",{className:"authorization",children:[Object(l.jsx)("div",{className:"authorization__header",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(l.jsx)(m,{value:n,onChange:function(e){var t=e.currentTarget.value.trim();t?(c(t),p&&O("")):(c(""),O("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0438\u043c\u044f!"))},onBlur:k,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f...",error:p}),Object(l.jsx)(m,{value:s,onChange:function(e){var t=e.currentTarget.value.trim();t?(d(t),_&&C("")):(d(""),C("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"))},onBlur:k,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c...",error:_}),Object(l.jsx)(N,{className:"authorization__btn",onClick:function(){I(function(e,t){return function(){var n=Object(x.a)(h.a.mark((function n(r){var c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.post("users/login/",{username:e,password:t});case 3:c=n.sent,localStorage.setItem("token",c.data.token),r(Object(i.f)()),console.log(localStorage.getItem("token")),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),alert("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"),console.log(n.t0.response.data);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(n,s)),c(""),d("")},children:"\u0412\u043e\u0439\u0442\u0438"})]})},I=n(20),k=n(27),w=n.p+"static/media/add.0bbf1711.svg",S=n(28),E=(n(80),void 0),A=function(e){var t=e.value,n=e.showForm,r=e.setValue,c=e.textareaRef,a=e.setShowForm,o=e.onAdd;return n?Object(l.jsx)("div",{className:"add-form",children:Object(l.jsxs)("div",{className:"add-form__input",children:[Object(l.jsx)(k.a,{children:Object(l.jsx)("textarea",{onChange:function(e){return r(e.target.value)},value:t,placeholder:"\u0412\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",ref:c,rows:"3"})}),Object(l.jsxs)("div",{className:"add-form__bottom",children:[Object(l.jsx)(N,{onClick:o,className:"button",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"}),Object(l.jsx)("img",{onClick:a.bind(E,!1),className:"add-form__bottom-clear",src:S.a,alt:"Clear svg icon"})]})]})}):Object(l.jsx)("div",{className:"add-form__bottom",children:Object(l.jsxs)("div",{onClick:a.bind(E,!0),className:"add-form__bottom-add-btn",children:[Object(l.jsx)("img",{src:w,alt:"Add svg icon"}),Object(l.jsx)("span",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"})]})})},R=function(e){var t=e.columnIndex,n=e.onAddCard,c=e.onAddColumn,a=e.isEmptyColumn,o=Object(r.useState)(!1),s=Object(b.a)(o,2),u=s[0],i=s[1],d=Object(r.useState)(""),j=Object(b.a)(d,2),f=j[0],p=j[1],O=Object(r.useRef)(null);Object(r.useEffect)((function(){O.current&&O.current.focus()}),[u]);return Object(l.jsx)(A,{onAdd:function(){a?c(f):n(t,f),p(""),i(!1)},showForm:u,setShowForm:i,value:f,setValue:p,textareaRef:O})},D=n(44),T=(n(81),function(e){var t=e.columnIndex,n=e.title,r=e.cards,c=e.onAddCard;return r?Object(l.jsx)(I.c,{type:"CARDS",droppableId:"column-".concat(t),children:function(e){return Object(l.jsx)("div",Object(f.a)(Object(f.a)({className:"column"},e.droppableProps),{},{ref:e.innerRef,children:Object(l.jsxs)("div",{className:"column__inner",children:[n&&Object(l.jsxs)("div",{className:"column__title",children:[Object(l.jsx)("b",{children:n}),Object(l.jsx)("b",{children:r.length})]}),Object(l.jsxs)("div",{className:"column__items",children:[r.map((function(e,n){return Object(l.jsx)(D.a,{columnIndex:t,cardIndex:n,cardID:e.id,cardSeqNum:e.seq_num,children:e.text},n)})),e.placeholder]}),Object(l.jsx)(R,{isEmptyColumn:!1,columnIndex:t,onAddCard:c})]})}))}}):Object(l.jsx)("div",{className:"column column--empty",children:Object(l.jsx)("div",{className:"column__inner",children:Object(l.jsx)(R,{isEmptyColumn:!0,columnIndex:t,onAddCard:c})})})}),q=n(21),B=function(){var e=Object(u.d)((function(e){return e.cards})),t=Object(u.d)((function(e){return e.users.initial})),n=Object(u.d)((function(e){return e.users.isAuth})),c=Object(u.c)();Object(r.useEffect)((function(){t||c(Object(i.d)()),n&&c(Object(q.b)())}),[n,t,c]);var a=function(e,t){c(Object(q.a)(e,t))};return Object(l.jsx)(r.Fragment,{children:Object(l.jsx)(I.a,{onDragEnd:function(t){var n=t.source,r=t.destination;if(r&&(n.droppableId!==r.droppableId||n.index!==r.index)){var a=n.index,o=n.droppableId,s=r.index,u=r.droppableId,i=parseInt(o.replace("column-","")),d=parseInt(u.replace("column-","")),l=e.find((function(e,t){return t===i})).cards.find((function(e,t){return t===a})),j=l.id,b=l.text;c(Object(q.d)(j,d,s,b))}},children:e.map((function(e,t){return Object(r.createElement)(T,Object(f.a)(Object(f.a)({},e),{},{key:t,columnIndex:t,onAddCard:a}))}))})})},P=(n(82),function(){var e=Object(u.d)((function(e){return e.users.isAuth})),t=Object(u.c)();return Object(r.useEffect)((function(){e||t(function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.getItem("token")?t(Object(i.f)()):t(Object(i.e)())}catch(n){localStorage.removeItem("token")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t,e]),Object(l.jsx)(o.a,{children:Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(j,{}),Object(l.jsx)("div",{className:"wrap",children:e?Object(l.jsxs)(s.d,{children:[Object(l.jsx)(s.b,{exact:!0,path:"/",component:B}),Object(l.jsx)(s.a,{to:"/"})]}):Object(l.jsxs)(s.d,{children:[Object(l.jsx)(s.b,{path:"/registration",component:_}),Object(l.jsx)(s.b,{path:"/login",component:C}),Object(l.jsx)(s.a,{to:"/login"})]})})]})})}),z=n(14),F=n(45),U=n(46),V=n(33),L=n(16),J=[{title:"ON HOLD",cards:[]},{title:"IN PROGRESS",cards:[]},{title:"NEEDS REVIEW",cards:[]},{title:"APPROVED",cards:[]}];var K={initial:!1,isAuth:!1};var W=Object(z.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a:return Object(f.a)(Object(f.a)({},e),{},{initial:!0});case i.c:return Object(f.a)(Object(f.a)({},e),{},{isAuth:!0});case i.b:return localStorage.removeItem("token"),Object(f.a)(Object(f.a)({},e),{},{initial:!1,isAuth:!1});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L.c:return e.map((function(e,n){return Object(f.a)(Object(f.a)({},e),{},{cards:Object(V.a)(t.payload.filter((function(e){return e.row==="".concat(n)})))})}));case L.a:return e.map((function(e,n){return+t.payload.row===n?Object(f.a)(Object(f.a)({},e),{},{cards:[].concat(Object(V.a)(e.cards),[{id:t.payload.id,row:t.payload.row,seq_num:t.payload.seq_num,text:t.payload.text}])}):e}));case L.b:return e.map((function(e,n){return t.payload.columnIndex===n?Object(f.a)(Object(f.a)({},e),{},{cards:e.cards.filter((function(e,n){return n!==t.payload.cardIndex}))}):e}));default:return e}}}),G=Object(z.createStore)(W,Object(F.composeWithDevTools)(Object(z.applyMiddleware)(U.a)));a.a.render(Object(l.jsx)(u.a,{store:G,children:Object(l.jsx)(P,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.f51b339f.chunk.js.map