(this["webpackJsonptest-nekidaem"]=this["webpackJsonptest-nekidaem"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return i}));var c="INIT_USER",r="SET_USER",a="LOGOUT",s=function(){return{type:c}},o=function(){return{type:r}},i=function(){return{type:a}}},16:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s}));var c="SET_CARDS",r="ADD_CARDS",a="REMOVE_CARDS",s={setCards:function(e){return{type:c,payload:e}},addCard:function(e){return{type:r,payload:e}},removeCard:function(e,t){return{type:a,payload:{columnIndex:e,cardIndex:t}}}}},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return f}));var c=n(6),r=n.n(c),a=n(15),s=n(26),o=n.n(s),i=n(16),u=n(10),d=o.a.create({baseURL:"https://trello.backend.tests.nekidaem.ru/api/v1/"});d.interceptors.request.use(function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.getItem("token"))&&(t.headers.Authorization="JWT ".concat(n)),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){throw 401!==e.response.status&&403!==e.response.status||document.location.reload(),e}));var l=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.get("cards/");case 3:n=e.sent,t(i.d.setCards(n.data)),t(Object(u.d)()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.detail);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e,t){return function(){var n=Object(a.a)(r.a.mark((function n(c){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.post("cards/",{row:e,text:t});case 3:a=n.sent,c(i.d.addCard(a.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),alert(n.t0.response.data.text[0]);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},b=function(e,t,n){return function(){var c=Object(a.a)(r.a.mark((function c(a){return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,d.delete("/cards/".concat(e,"/"));case 3:a(i.d.removeCard(t,n)),c.next=9;break;case 6:c.prev=6,c.t0=c.catch(0),alert(c.t0.response.data);case 9:case"end":return c.stop()}}),c,null,[[0,6]])})));return function(e){return c.apply(this,arguments)}}()},f=function(e,t,n,c){return function(){var s=Object(a.a)(r.a.mark((function a(s){return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d.patch("/cards/".concat(e,"/"),{row:t,seq_num:n,text:c});case 3:s(l()),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),alert(r.t0.response.data);case 9:case"end":return r.stop()}}),a,null,[[0,6]])})));return function(e){return s.apply(this,arguments)}}()}},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(4),r=(n(0),n(20)),a=n(28),s=(n(78),n(1)),o=function(e){var t=e.cardIndex,n=e.columnIndex,o=e.children,i=e.onRemove,u=e.cardID,d=e.cardSeqNum;return"undefined"!==typeof t?Object(s.jsx)(r.b,{draggableId:"card-".concat(n,"-").concat(t),index:t,children:function(e,t){return Object(s.jsxs)("div",Object(c.a)(Object(c.a)(Object(c.a)({className:"card",ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[Object(s.jsxs)("div",{children:["id ".concat(u," "),"sqn ".concat(d)]}),Object(s.jsxs)("div",{className:"card__text",children:[Object(s.jsx)("div",{children:o}),Object(s.jsx)("div",{onClick:i,className:"remove-btn",children:Object(s.jsx)("img",{src:a.a,alt:"Clear svg icon"})})]})]}))}}):Object(s.jsx)("div",{className:"card",children:o})}},28:function(e,t,n){"use strict";t.a=n.p+"static/media/clear.4ac10f93.svg"},35:function(e,t,n){},44:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var c=n(27),r=n(3),a=n(21),s=n(1);function o(t){var n=t.columnIndex,o=t.cardIndex,i=t.children,u=t.cardID,d=t.cardSeqNum,l=Object(r.d)((function(e){return e.cards})),j=Object(r.c)();return Object(s.jsx)(c.a,{children:i,items:l,cardIndex:o,columnIndex:n,onRemove:function(){e.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")&&j(Object(a.c)(u,n,o))},cardID:u,cardSeqNum:d})}}).call(this,n(34))},54:function(e,t,n){},57:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(18),a=n.n(r),s=n(17),o=n(5),i=n(3),u=n(10),d=n.p+"static/media/avatar.1af8adc2.svg",l=(n(54),n(1)),j=function(){var e=Object(i.d)((function(e){return e.users.isAuth})),t=Object(i.c)();return Object(l.jsx)("div",{className:"navbar",children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(s.b,{to:"/",className:"navbar__logo",children:Object(l.jsx)("div",{className:"navbar__header",children:"Trello"})}),!e&&Object(l.jsx)("div",{className:"navbar__login",children:Object(l.jsx)(s.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})}),!e&&Object(l.jsx)("div",{className:"navbar__registration",children:Object(l.jsx)(s.b,{to:"/registration",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),e&&Object(l.jsx)("div",{className:"navbar__login",onClick:function(){return t(Object(u.e)())},children:"\u0412\u044b\u0445\u043e\u0434"}),e&&Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("img",{className:"navbar__avatar",src:d,alt:""})})]})})},b=n(14),f=(n(35),n(57),function(e){return Object(l.jsx)("input",{value:e.value,onChange:function(t){return e.setValue(t.target.value)},type:e.type,placeholder:e.placeholder})}),p=n(6),O=n.n(p),m=n(15),x=n(26),v=n.n(x).a.create({baseURL:"https://trello.backend.tests.nekidaem.ru/api/v1/"}),h=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(b.a)(a,2),o=s[0],u=s[1],d=Object(c.useState)(""),j=Object(b.a)(d,2),p=j[0],x=j[1],h=Object(i.c)();return Object(l.jsxs)("div",{className:"authorization",children:[Object(l.jsx)("div",{className:"authorization__header",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(l.jsx)(f,{value:n,setValue:r,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f..."}),Object(l.jsx)(f,{value:o,setValue:u,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email..."}),Object(l.jsx)(f,{value:p,setValue:x,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c..."}),Object(l.jsx)("button",{className:"authorization__btn",onClick:function(){return h(function(e,t,n){return Object(m.a)(O.a.mark((function c(){var r;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,v.post("users/create/",{username:e,email:t,password:n});case 3:r=c.sent,alert("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u0430!"),localStorage.setItem("token",r.data.token),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(0),alert("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435!"),console.log(c.t0.response.data);case 12:case"end":return c.stop()}}),c,null,[[0,8]])})))}(n,o,p))},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},g=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(b.a)(a,2),o=s[0],d=s[1],j=Object(i.c)();return Object(l.jsxs)("div",{className:"authorization",children:[Object(l.jsx)("div",{className:"authorization__header",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(l.jsx)(f,{value:n,setValue:r,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f..."}),Object(l.jsx)(f,{value:o,setValue:d,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c..."}),Object(l.jsx)("button",{className:"authorization__btn",onClick:function(){return j(function(e,t){return function(){var n=Object(m.a)(O.a.mark((function n(c){var r;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.post("users/login/",{username:e,password:t});case 3:r=n.sent,localStorage.setItem("token",r.data.token),c(Object(u.f)()),console.log(localStorage.getItem("token")),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),alert("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"),console.log(n.t0.response.data);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(n,o))},children:"\u0412\u043e\u0439\u0442\u0438"})]})},_=n(4),y=n(20),k=(n(77),function(e){var t=e.children,n=e.onClick;return Object(l.jsx)("button",{className:"button",onClick:n,children:t})}),I=n(27),N=n.p+"static/media/add.0bbf1711.svg",w=n(28),C=(n(79),void 0),S=function(e){var t=e.value,n=e.showForm,c=e.setValue,r=e.textareaRef,a=e.setShowForm,s=e.onAdd;return n?Object(l.jsx)("div",{className:"add-form",children:Object(l.jsxs)("div",{className:"add-form__input",children:[Object(l.jsx)(I.a,{children:Object(l.jsx)("textarea",{onChange:function(e){return c(e.target.value)},value:t,placeholder:"\u0412\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",ref:r,rows:"3"})}),Object(l.jsxs)("div",{className:"add-form__bottom",children:[Object(l.jsx)(k,{onClick:s,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"}),Object(l.jsx)("img",{onClick:a.bind(C,!1),className:"add-form__bottom-clear",src:w.a,alt:"Clear svg icon"})]})]})}):Object(l.jsx)("div",{className:"add-form__bottom",children:Object(l.jsxs)("div",{onClick:a.bind(C,!0),className:"add-form__bottom-add-btn",children:[Object(l.jsx)("img",{src:N,alt:"Add svg icon"}),Object(l.jsx)("span",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"})]})})},A=function(e){var t=e.columnIndex,n=e.onAddCard,r=e.onAddColumn,a=e.isEmptyColumn,s=Object(c.useState)(!1),o=Object(b.a)(s,2),i=o[0],u=o[1],d=Object(c.useState)(""),j=Object(b.a)(d,2),f=j[0],p=j[1],O=Object(c.useRef)(null);Object(c.useEffect)((function(){O.current&&O.current.focus()}),[i]);return Object(l.jsx)(S,{onAdd:function(){a?r(f):n(t,f),p(""),u(!1)},showForm:i,setShowForm:u,value:f,setValue:p,textareaRef:O})},E=n(44),R=(n(80),function(e){var t=e.columnIndex,n=e.title,c=e.cards,r=e.onAddCard;return c?Object(l.jsx)(y.c,{type:"CARDS",droppableId:"column-".concat(t),children:function(e){return Object(l.jsx)("div",Object(_.a)(Object(_.a)({className:"column"},e.droppableProps),{},{ref:e.innerRef,children:Object(l.jsxs)("div",{className:"column__inner",children:[n&&Object(l.jsxs)("div",{className:"column__title",children:[Object(l.jsx)("b",{children:n}),Object(l.jsx)("b",{children:c.length})]}),Object(l.jsxs)("div",{className:"column__items",children:[c.map((function(e,n){return Object(l.jsx)(E.a,{columnIndex:t,cardIndex:n,cardID:e.id,cardSeqNum:e.seq_num,children:e.text},n)})),e.placeholder]}),Object(l.jsx)(A,{isEmptyColumn:!1,columnIndex:t,onAddCard:r})]})}))}}):Object(l.jsx)("div",{className:"column column--empty",children:Object(l.jsx)("div",{className:"column__inner",children:Object(l.jsx)(A,{isEmptyColumn:!0,columnIndex:t,onAddCard:r})})})}),D=n(21),V=function(){var e=Object(i.d)((function(e){return e.cards})),t=Object(i.d)((function(e){return e.users.initial})),n=Object(i.d)((function(e){return e.users.isAuth})),r=Object(i.c)();Object(c.useEffect)((function(){t||r(Object(u.d)()),n&&r(Object(D.b)())}),[n,t,r]);var a=function(e,t){r(Object(D.a)(e,t))};return Object(l.jsx)(c.Fragment,{children:Object(l.jsx)(y.a,{onDragEnd:function(t){var n=t.source,c=t.destination;if(c&&(n.droppableId!==c.droppableId||n.index!==c.index)){var a=n.index,s=n.droppableId,o=c.index,i=c.droppableId,u=parseInt(s.replace("column-","")),d=parseInt(i.replace("column-","")),l=e.find((function(e,t){return t===u})).cards.find((function(e,t){return t===a})),j=l.id,b=l.text;r(Object(D.d)(j,d,o,b))}},children:e.map((function(e,t){return Object(c.createElement)(R,Object(_.a)(Object(_.a)({},e),{},{key:t,columnIndex:t,onAddCard:a}))}))})})},q=(n(81),function(){var e=Object(i.d)((function(e){return e.users.isAuth})),t=Object(i.c)();return Object(c.useEffect)((function(){e||t(function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.getItem("token")?t(Object(u.f)()):t(Object(u.e)())}catch(n){localStorage.removeItem("token")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t,e]),Object(l.jsx)(s.a,{children:Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(j,{}),Object(l.jsx)("div",{className:"wrap",children:e?Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{exact:!0,path:"/",component:V}),Object(l.jsx)(o.a,{to:"/"})]}):Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{path:"/registration",component:h}),Object(l.jsx)(o.b,{path:"/login",component:g}),Object(l.jsx)(o.a,{to:"/login"})]})})]})})}),z=n(13),T=n(45),P=n(46),F=n(33),U=n(16),L=[{title:"ON HOLD",cards:[]},{title:"IN PROGRESS",cards:[]},{title:"NEEDS REVIEW",cards:[]},{title:"APPROVED",cards:[]}];var J={initial:!1,isAuth:!1};var W=Object(z.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a:return Object(_.a)(Object(_.a)({},e),{},{initial:!0});case u.c:return Object(_.a)(Object(_.a)({},e),{},{isAuth:!0});case u.b:return localStorage.removeItem("token"),Object(_.a)(Object(_.a)({},e),{},{initial:!1,isAuth:!1});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U.c:return e.map((function(e,n){return Object(_.a)(Object(_.a)({},e),{},{cards:Object(F.a)(t.payload.filter((function(e){return e.row==="".concat(n)})))})}));case U.a:return e.map((function(e,n){return+t.payload.row===n?Object(_.a)(Object(_.a)({},e),{},{cards:[].concat(Object(F.a)(e.cards),[{id:t.payload.id,row:t.payload.row,seq_num:t.payload.seq_num,text:t.payload.text}])}):e}));case U.b:return e.map((function(e,n){return t.payload.columnIndex===n?Object(_.a)(Object(_.a)({},e),{},{cards:e.cards.filter((function(e,n){return n!==t.payload.cardIndex}))}):e}));default:return e}}}),G=Object(z.createStore)(W,Object(T.composeWithDevTools)(Object(z.applyMiddleware)(P.a)));a.a.render(Object(l.jsx)(i.a,{store:G,children:Object(l.jsx)(q,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.4f9e7628.chunk.js.map