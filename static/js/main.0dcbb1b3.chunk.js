(this["webpackJsonptest-nekidaem"]=this["webpackJsonptest-nekidaem"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return i}));var c="INIT_USER",r="SET_USER",a="LOGOUT",s=function(){return{type:c}},o=function(){return{type:r}},i=function(){return{type:a}}},16:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return o}));var c="SET_CARDS",r="ADD_CARDS",a="REMOVE_CARDS",s="REORDER_CARDS",o={setCards:function(e){return{type:c,payload:e}},addCard:function(e){return{type:r,payload:e}},removeCard:function(e,t){return{type:a,payload:{columnIndex:e,cardIndex:t}}},reorderCards:function(e){var t=e.source,n=e.destination;return{type:s,payload:{source:t,destination:n}}}}},17:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return b}));var c=n(7),r=n.n(c),a=n(15),s=n(18),o=n(16),i=n(10),u={headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}},d=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!localStorage.getItem("token")){e.next=7;break}return e.next=4,s.a.get("cards/",u);case 4:n=e.sent,t(o.e.setCards(n.data)),t(Object(i.d)());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0.response.data.detail);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},l=function(e,t){return function(){var n=Object(a.a)(r.a.mark((function n(c){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.post("cards/",{row:e,text:t},u);case 3:a=n.sent,c(o.e.addCard(a.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),alert(n.t0.response.data.text[0]);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},j=function(e,t,n){return function(){var c=Object(a.a)(r.a.mark((function c(a){var i;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,s.a.delete("/cards/".concat(e,"/"),u);case 3:i=c.sent,a(o.e.removeCard(t,n)),console.log(i.data),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(0),alert(c.t0.response.data);case 11:case"end":return c.stop()}}),c,null,[[0,8]])})));return function(e){return c.apply(this,arguments)}}()},b=function(e,t,n,c){return function(){var o=Object(a.a)(r.a.mark((function a(o){var i;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.a.patch("/cards/".concat(e,"/"),{row:t,seq_num:n,text:c},u);case 3:i=r.sent,o(d()),console.log(i.data),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),alert(r.t0.response.data);case 11:case"end":return r.stop()}}),a,null,[[0,8]])})));return function(e){return o.apply(this,arguments)}}()}},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(44),r=n.n(c).a.create({baseURL:"https://trello.backend.tests.nekidaem.ru/api/v1/"})},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(4),r=(n(0),n(22)),a=n(28),s=(n(79),n(1)),o=function(e){var t=e.cardIndex,n=e.columnIndex,o=e.children,i=e.onRemove,u=e.cardID,d=e.cardSeqNum;return"undefined"!==typeof t?Object(s.jsx)(r.b,{draggableId:"card-".concat(n,"-").concat(t),index:t,children:function(e,t){return Object(s.jsxs)("div",Object(c.a)(Object(c.a)(Object(c.a)({className:"card",ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[Object(s.jsxs)("div",{children:["id ".concat(u," "),"sqn ".concat(d)]}),Object(s.jsxs)("div",{className:"card__text",children:[Object(s.jsx)("div",{children:o}),Object(s.jsx)("div",{onClick:i,className:"remove-btn",children:Object(s.jsx)("img",{src:a.a,alt:"Clear svg icon"})})]})]}))}}):Object(s.jsx)("div",{className:"card",children:o})}},28:function(e,t,n){"use strict";t.a=n.p+"static/media/clear.4ac10f93.svg"},43:function(e,t,n){},45:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var c=n(27),r=n(3),a=n(17),s=n(1);function o(t){var n=t.columnIndex,o=t.cardIndex,i=t.children,u=t.cardID,d=t.cardSeqNum,l=Object(r.d)((function(e){return e.cards})),j=Object(r.c)();return Object(s.jsx)(c.a,{children:i,items:l,cardIndex:o,columnIndex:n,onRemove:function(){e.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")&&j(Object(a.c)(u,n,o))},cardID:u,cardSeqNum:d})}}).call(this,n(42))},55:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(20),a=n.n(r),s=n(19),o=n(5),i=n(3),u=n(10),d=n.p+"static/media/avatar.1af8adc2.svg",l=(n(55),n(17)),j=n(1),b=function(){var e=Object(i.d)((function(e){return e.users.isAuth})),t=Object(i.c)();return Object(j.jsx)("div",{className:"navbar",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(s.b,{to:"/",className:"navbar__logo",children:Object(j.jsx)("div",{className:"navbar__header",children:"Trello"})}),!e&&Object(j.jsx)("div",{className:"navbar__login",children:Object(j.jsx)(s.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})}),!e&&Object(j.jsx)("div",{className:"navbar__registration",children:Object(j.jsx)(s.b,{to:"/registration",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),e&&Object(j.jsx)("div",{className:"navbar__login",onClick:function(){return t(Object(l.b)())},children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"}),e&&Object(j.jsx)("div",{className:"navbar__login",onClick:function(){return t(Object(u.e)())},children:"\u0412\u044b\u0445\u043e\u0434"}),e&&Object(j.jsx)(s.b,{to:"/",children:Object(j.jsx)("img",{className:"navbar__avatar",src:d,alt:""})})]})})},f=n(12),p=(n(43),n(77),function(e){return Object(j.jsx)("input",{value:e.value,onChange:function(t){return e.setValue(t.target.value)},type:e.type,placeholder:e.placeholder})}),O=n(7),m=n.n(O),v=n(15),x=n(18),h=function(){var e=Object(c.useState)(""),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(f.a)(a,2),o=s[0],u=s[1],d=Object(c.useState)(""),l=Object(f.a)(d,2),b=l[0],O=l[1],h=Object(i.c)();return Object(j.jsxs)("div",{className:"authorization",children:[Object(j.jsx)("div",{className:"authorization__header",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(p,{value:n,setValue:r,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f..."}),Object(j.jsx)(p,{value:o,setValue:u,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email..."}),Object(j.jsx)(p,{value:b,setValue:O,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c..."}),Object(j.jsx)("button",{className:"authorization__btn",onClick:function(){return h(function(e,t,n){return Object(v.a)(m.a.mark((function c(){var r;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,x.a.post("users/create/",{username:e,email:t,password:n});case 3:r=c.sent,alert("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u0430!"),localStorage.setItem("token",r.data.token),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(0),alert("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435!"),console.log(c.t0.response.data);case 12:case"end":return c.stop()}}),c,null,[[0,8]])})))}(n,o,b))},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},g=function(){var e=Object(c.useState)(""),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(f.a)(a,2),o=s[0],d=s[1],l=Object(i.c)();return Object(j.jsxs)("div",{className:"authorization",children:[Object(j.jsx)("div",{className:"authorization__header",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(j.jsx)(p,{value:n,setValue:r,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f..."}),Object(j.jsx)(p,{value:o,setValue:d,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c..."}),Object(j.jsx)("button",{className:"authorization__btn",onClick:function(){return l(function(e,t){return function(){var n=Object(v.a)(m.a.mark((function n(c){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x.a.post("users/login/",{username:e,password:t});case 3:r=n.sent,localStorage.setItem("token",r.data.token),c(Object(u.f)()),console.log(localStorage.getItem("token")),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),alert("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!"),console.log(n.t0.response.data);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(n,o))},children:"\u0412\u043e\u0439\u0442\u0438"})]})},_=n(4),y=n(22),I=(n(78),function(e){var t=e.children,n=e.onClick;return Object(j.jsx)("button",{className:"button",onClick:n,children:t})}),N=n(27),k=n.p+"static/media/add.0bbf1711.svg",w=n(28),C=(n(80),void 0),S=function(e){var t=e.value,n=e.showForm,c=e.setValue,r=e.textareaRef,a=e.setShowForm,s=e.onAdd;return n?Object(j.jsx)("div",{className:"add-form",children:Object(j.jsxs)("div",{className:"add-form__input",children:[Object(j.jsx)(N.a,{children:Object(j.jsx)("textarea",{onChange:function(e){return c(e.target.value)},value:t,placeholder:"\u0412\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",ref:r,rows:"3"})}),Object(j.jsxs)("div",{className:"add-form__bottom",children:[Object(j.jsx)(I,{onClick:s,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"}),Object(j.jsx)("img",{onClick:a.bind(C,!1),className:"add-form__bottom-clear",src:w.a,alt:"Clear svg icon"})]})]})}):Object(j.jsx)("div",{className:"add-form__bottom",children:Object(j.jsxs)("div",{onClick:a.bind(C,!0),className:"add-form__bottom-add-btn",children:[Object(j.jsx)("img",{src:k,alt:"Add svg icon"}),Object(j.jsx)("span",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"})]})})},A=function(e){var t=e.columnIndex,n=e.onAddCard,r=e.onAddColumn,a=e.isEmptyColumn,s=Object(c.useState)(!1),o=Object(f.a)(s,2),i=o[0],u=o[1],d=Object(c.useState)(""),l=Object(f.a)(d,2),b=l[0],p=l[1],O=Object(c.useRef)(null);Object(c.useEffect)((function(){O.current&&O.current.focus()}),[i]);return Object(j.jsx)(S,{onAdd:function(){a?r(b):n(t,b),p(""),u(!1)},showForm:i,setShowForm:u,value:b,setValue:p,textareaRef:O})},R=n(45),E=(n(81),function(e){var t=e.columnIndex,n=e.title,c=e.cards,r=e.onAddCard;return c?Object(j.jsx)(y.c,{type:"CARDS",droppableId:"column-".concat(t),children:function(e){return Object(j.jsx)("div",Object(_.a)(Object(_.a)({className:"column"},e.droppableProps),{},{ref:e.innerRef,children:Object(j.jsxs)("div",{className:"column__inner",children:[n&&Object(j.jsxs)("div",{className:"column__title",children:[Object(j.jsx)("b",{children:n}),Object(j.jsx)("b",{children:c.length})]}),Object(j.jsxs)("div",{className:"column__items",children:[c.map((function(e,n){return Object(j.jsx)(R.a,{columnIndex:t,cardIndex:n,cardID:e.id,cardSeqNum:e.seq_num,children:e.text},n)})),e.placeholder]}),Object(j.jsx)(A,{isEmptyColumn:!1,columnIndex:t,onAddCard:r})]})}))}}):Object(j.jsx)("div",{className:"column column--empty",children:Object(j.jsx)("div",{className:"column__inner",children:Object(j.jsx)(A,{isEmptyColumn:!0,columnIndex:t,onAddCard:r})})})}),D=function(){var e=Object(i.d)((function(e){return e.cards})),t=Object(i.d)((function(e){return e.users.initial})),n=Object(i.d)((function(e){return e.users.isAuth})),r=Object(i.c)();Object(c.useEffect)((function(){t||r(Object(u.d)()),n&&r(Object(l.b)())}),[n,t,r]);var a=function(e,t){r(Object(l.a)(e,t))};return Object(j.jsx)(c.Fragment,{children:Object(j.jsx)(y.a,{onDragEnd:function(t){var n=t.source,c=t.destination;if(c&&(n.droppableId!==c.droppableId||n.index!==c.index)){var a=n.index,s=n.droppableId,o=c.index,i=c.droppableId,u=parseInt(s.replace("column-","")),d=parseInt(i.replace("column-","")),j=e.find((function(e,t){return t===u})).cards.find((function(e,t){return t===a})),b=j.id,f=j.text;r(Object(l.d)(b,d,o,f))}},children:e.map((function(e,t){return Object(c.createElement)(E,Object(_.a)(Object(_.a)({},e),{},{key:t,columnIndex:t,onAddCard:a}))}))})})},V=(n(82),function(){var e=Object(i.d)((function(e){return e.users.isAuth})),t=Object(i.c)();return Object(c.useEffect)((function(){e||t(function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.getItem("token")?t(Object(u.f)()):t(Object(u.e)())}catch(n){localStorage.removeItem("token")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t,e]),Object(j.jsx)(s.a,{children:Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)(b,{}),Object(j.jsx)("div",{className:"wrap",children:e?Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{exact:!0,path:"/",component:D}),Object(j.jsx)(o.a,{to:"/"})]}):Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/registration",component:h}),Object(j.jsx)(o.b,{path:"/login",component:g}),Object(j.jsx)(o.a,{to:"/login"})]})})]})})}),q=n(14),z=n(46),T=n(47),P=n(33),F=n(16),U=function(e){var t=e.state,n=e.source,c=e.destination,r=n.index,a=n.droppableId,s=c.index,o=c.droppableId,i=parseInt(a.replace("column-","")),u=parseInt(o.replace("column-",""));return t.map((function(e,n){if(u===n){var c=t[i].cards.splice(r,1),a=Object(f.a)(c,1)[0],o=Array.from(t[u].cards);o.splice(s,0,a),e.cards=o}return e}))},J=[{title:"ON HOLD",cards:[]},{title:"IN PROGRESS",cards:[]},{title:"NEEDS REVIEW",cards:[]},{title:"APPROVED",cards:[]}];var L={initial:!1,isAuth:!1};var W=Object(q.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a:return Object(_.a)(Object(_.a)({},e),{},{initial:!0});case u.c:return Object(_.a)(Object(_.a)({},e),{},{isAuth:!0});case u.b:return localStorage.removeItem("token"),Object(_.a)(Object(_.a)({},e),{},{initial:!1,isAuth:!1});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.d:return e.map((function(e,n){return Object(_.a)(Object(_.a)({},e),{},{cards:Object(P.a)(t.payload.filter((function(e){return e.row==="".concat(n)})))})}));case F.a:return e.map((function(e,n){return+t.payload.row===n?Object(_.a)(Object(_.a)({},e),{},{cards:[].concat(Object(P.a)(e.cards),[{id:t.payload.id,row:t.payload.row,seq_num:t.payload.seq_num,text:t.payload.text}])}):e}));case F.b:return e.map((function(e,n){return t.payload.columnIndex===n?Object(_.a)(Object(_.a)({},e),{},{cards:e.cards.filter((function(e,n){return n!==t.payload.cardIndex}))}):e}));case F.c:var n=t.payload,c=n.source,r=n.destination;return U({state:e,source:c,destination:r});default:return e}}}),G=Object(q.createStore)(W,Object(z.composeWithDevTools)(Object(q.applyMiddleware)(T.a)));a.a.render(Object(j.jsx)(i.a,{store:G,children:Object(j.jsx)(V,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.0dcbb1b3.chunk.js.map