(this["webpackJsonptest-nekidaem"]=this["webpackJsonptest-nekidaem"]||[]).push([[0],{15:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return o}));var c="SET_CARDS",r="ADD_CARDS",a="REMOVE_CARDS",s="REORDER_CARDS",o={setCards:function(e){return{type:c,payload:e}},addCard:function(e){return{type:r,payload:e}},removeCard:function(e,t){return{type:a,payload:{columnIndex:e,cardIndex:t}}},reorderCards:function(e){var t=e.source,n=e.destination;return{type:s,payload:{source:t,destination:n}}}}},16:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return j}));var c=n(7),r=n.n(c),a=n(14),s=n(17),o=n(15),i={headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}},u=function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("cards/",i);case 3:n=e.sent,t(o.e.setCards(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e,t){return function(){var n=Object(a.a)(r.a.mark((function n(c){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.post("cards/",{row:e,text:t},i);case 3:a=n.sent,c(o.e.addCard(a.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),alert(n.t0.response.data.text[0]);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},l=function(e,t,n){return function(){var c=Object(a.a)(r.a.mark((function c(a){return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,s.a.delete("/cards/".concat(e,"/"),i);case 3:c.sent,a(o.e.removeCard(t,n)),c.next=10;break;case 7:c.prev=7,c.t0=c.catch(0),alert(c.t0.response.data);case 10:case"end":return c.stop()}}),c,null,[[0,7]])})));return function(e){return c.apply(this,arguments)}}()},j=function(e,t,n,c){return function(){var o=Object(a.a)(r.a.mark((function a(o){return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.a.patch("/cards/".concat(e,"/"),{row:t,seq_num:n,text:c},i);case 3:r.sent,o(u()),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),alert(r.t0.response.data);case 10:case"end":return r.stop()}}),a,null,[[0,7]])})));return function(e){return o.apply(this,arguments)}}()}},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(43),r=n.n(c).a.create({baseURL:"https://trello.backend.tests.nekidaem.ru/api/v1/"})},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var c=n(4),r=(n(0),n(21)),a=n(27),s=(n(78),n(1)),o=function(e){var t=e.cardIndex,n=e.columnIndex,o=e.children,i=e.onRemove,u=e.cardID,d=e.cardSeqNum;return"undefined"!==typeof t?Object(s.jsx)(r.b,{draggableId:"card-".concat(n,"-").concat(t),index:t,children:function(e,t){return Object(s.jsxs)("div",Object(c.a)(Object(c.a)(Object(c.a)({className:"card",ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[Object(s.jsx)("span",{children:o}),"ID ".concat(u," "),"SqN ".concat(d),Object(s.jsx)("div",{onClick:i,className:"remove-btn",children:Object(s.jsx)("img",{src:a.a,alt:"Clear svg icon"})})]}))}}):Object(s.jsx)("div",{className:"card",children:o})}},27:function(e,t,n){"use strict";t.a=n.p+"static/media/clear.4ac10f93.svg"},34:function(e,t,n){},44:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var c=n(26),r=n(3),a=n(16),s=n(1);function o(t){var n=t.columnIndex,o=t.cardIndex,i=t.children,u=t.cardID,d=t.cardSeqNum,l=Object(r.d)((function(e){return e.cards})),j=Object(r.c)();return Object(s.jsx)(c.a,{children:i,items:l,cardIndex:o,columnIndex:n,onRemove:function(){e.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")&&j(Object(a.c)(u,n,o))},cardID:u,cardSeqNum:d})}}).call(this,n(33))},54:function(e,t,n){},57:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(19),a=n.n(r),s=n(18),o=n(5),i=n(3),u="SET_USER",d="LOGOUT",l=function(){return{type:u}},j=function(){return{type:d}},b=n.p+"static/media/avatar.1af8adc2.svg",p=(n(54),n(1)),f=function(){var e=Object(i.d)((function(e){return e.users.isAuth})),t=Object(i.c)();return Object(p.jsx)("div",{className:"navbar",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(s.b,{to:"/",className:"navbar__logo",children:Object(p.jsx)("div",{className:"navbar__header",children:"Trello"})}),!e&&Object(p.jsx)("div",{className:"navbar__login",children:Object(p.jsx)(s.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})}),!e&&Object(p.jsx)("div",{className:"navbar__registration",children:Object(p.jsx)(s.b,{to:"/registration",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),e&&Object(p.jsx)("div",{className:"navbar__login",onClick:function(){return t(j())},children:"\u0412\u044b\u0445\u043e\u0434"}),e&&Object(p.jsx)(s.b,{to:"/",children:Object(p.jsx)("img",{className:"navbar__avatar",src:b,alt:""})})]})})},O=n(11),m=(n(34),n(57),function(e){return Object(p.jsx)("input",{value:e.value,onChange:function(t){return e.setValue(t.target.value)},type:e.type,placeholder:e.placeholder})}),x=n(7),v=n.n(x),h=n(14),g=n(17),_=n(16),y=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(O.a)(a,2),o=s[0],u=s[1],d=Object(c.useState)(""),j=Object(O.a)(d,2),b=j[0],f=j[1],x=Object(i.c)();return Object(p.jsxs)("div",{className:"authorization",children:[Object(p.jsx)("div",{className:"authorization__header",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)(m,{value:n,setValue:r,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f..."}),Object(p.jsx)(m,{value:o,setValue:u,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email..."}),Object(p.jsx)(m,{value:b,setValue:f,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c..."}),Object(p.jsx)("button",{className:"authorization__btn",onClick:function(){return x(function(e,t,n){return function(){var c=Object(h.a)(v.a.mark((function c(r){var a;return v.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,g.a.post("users/create/",{username:e,email:t,password:n});case 3:a=c.sent,alert("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u0430!"),r(l()),localStorage.setItem("token",a.data.token),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0.response.data);case 12:case"end":return c.stop()}}),c,null,[[0,9]])})));return function(e){return c.apply(this,arguments)}}()}(n,o,b))},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},I=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(O.a)(a,2),o=s[0],u=s[1],d=Object(i.c)();return Object(p.jsxs)("div",{className:"authorization",children:[Object(p.jsx)("div",{className:"authorization__header",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(p.jsx)(m,{value:n,setValue:r,type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f..."}),Object(p.jsx)(m,{value:o,setValue:u,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c..."}),Object(p.jsx)("button",{className:"authorization__btn",onClick:function(){return d(function(e,t){return function(){var n=Object(h.a)(v.a.mark((function n(c){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.post("users/login/",{username:e,password:t});case 3:r=n.sent,c(l()),localStorage.setItem("token",r.data.token),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),alert("\u0412\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!");case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(n,o))},children:"\u0412\u043e\u0439\u0442\u0438"})]})},N=n(4),k=n(21),w=(n(77),function(e){var t=e.children,n=e.onClick;return Object(p.jsx)("button",{className:"button",onClick:n,children:t})}),C=n(26),S=n.p+"static/media/add.0bbf1711.svg",A=n(27),R=(n(79),void 0),E=function(e){var t=e.value,n=e.showForm,c=e.setValue,r=e.textareaRef,a=e.setShowForm,s=e.onAdd;return n?Object(p.jsx)("div",{className:"add-form",children:Object(p.jsxs)("div",{className:"add-form__input",children:[Object(p.jsx)(C.a,{children:Object(p.jsx)("textarea",{onChange:function(e){return c(e.target.value)},value:t,placeholder:"\u0412\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",ref:r,rows:"3"})}),Object(p.jsxs)("div",{className:"add-form__bottom",children:[Object(p.jsx)(w,{onClick:s,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"}),Object(p.jsx)("img",{onClick:a.bind(R,!1),className:"add-form__bottom-clear",src:A.a,alt:"Clear svg icon"})]})]})}):Object(p.jsx)("div",{className:"add-form__bottom",children:Object(p.jsxs)("div",{onClick:a.bind(R,!0),className:"add-form__bottom-add-btn",children:[Object(p.jsx)("img",{src:S,alt:"Add svg icon"}),Object(p.jsx)("span",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"})]})})},D=function(e){var t=e.columnIndex,n=e.onAddCard,r=e.onAddColumn,a=e.isEmptyColumn,s=Object(c.useState)(!1),o=Object(O.a)(s,2),i=o[0],u=o[1],d=Object(c.useState)(""),l=Object(O.a)(d,2),j=l[0],b=l[1],f=Object(c.useRef)(null);Object(c.useEffect)((function(){f.current&&f.current.focus()}),[i]);return Object(p.jsx)(E,{onAdd:function(){a?r(j):n(t,j),b(""),u(!1)},showForm:i,setShowForm:u,value:j,setValue:b,textareaRef:f})},V=n(44),q=(n(80),function(e){var t=e.columnIndex,n=e.title,c=e.cards,r=e.onAddCard;return c?Object(p.jsx)(k.c,{type:"CARDS",droppableId:"column-".concat(t),children:function(e){return Object(p.jsx)("div",Object(N.a)(Object(N.a)({className:"column"},e.droppableProps),{},{ref:e.innerRef,children:Object(p.jsxs)("div",{className:"column__inner",children:[n&&Object(p.jsxs)("div",{className:"column__title",children:[Object(p.jsx)("b",{children:n}),Object(p.jsx)("b",{children:c.length})]}),Object(p.jsxs)("div",{className:"column__items",children:[c.map((function(e,n){return Object(p.jsx)(V.a,{columnIndex:t,cardIndex:n,cardID:e.id,cardSeqNum:e.seq_num,children:e.text},n)})),e.placeholder]}),Object(p.jsx)(D,{isEmptyColumn:!1,columnIndex:t,onAddCard:r})]})}))}}):Object(p.jsx)("div",{className:"column column--empty",children:Object(p.jsx)("div",{className:"column__inner",children:Object(p.jsx)(D,{isEmptyColumn:!0,columnIndex:t,onAddCard:r})})})}),z=function(){var e=Object(i.d)((function(e){return e.cards})),t=Object(i.c)(),n=function(e,n){t(Object(_.a)(e,n))};return Object(p.jsx)(c.Fragment,{children:Object(p.jsx)(k.a,{onDragEnd:function(n){var c=n.source,r=n.destination;if(r&&(c.droppableId!==r.droppableId||c.index!==r.index)){var a=c.index,s=c.droppableId,o=r.index,i=r.droppableId,u=parseInt(s.replace("column-","")),d=parseInt(i.replace("column-","")),l=e.find((function(e,t){return t===u})).cards.find((function(e,t){return t===a})),j=l.id,b=l.text;t(Object(_.d)(j,d,o,b))}},children:e.map((function(e,t){return Object(c.createElement)(q,Object(N.a)(Object(N.a)({},e),{},{key:t,columnIndex:t,onAddCard:n}))}))})})},P=(n(81),function(){var e=Object(i.d)((function(e){return e.users.isAuth})),t=(Object(i.d)((function(e){return e.cards})),Object(i.c)());return Object(c.useEffect)((function(){e||t(function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.getItem("token")?t(l()):t(j())}catch(n){localStorage.removeItem("token")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(c.useEffect)((function(){t(Object(_.b)())}),[]),Object(p.jsx)(s.a,{children:Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(f,{}),Object(p.jsx)("div",{className:"wrap",children:e?Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{exact:!0,path:"/",component:z}),Object(p.jsx)(o.a,{to:"/"})]}):Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{path:"/registration",component:y}),Object(p.jsx)(o.b,{path:"/login",component:I}),Object(p.jsx)(o.a,{to:"/login"})]})})]})})}),T=n(13),F=n(45),J=n(46),L=n(32),U=n(15),W=function(e){var t=e.state,n=e.source,c=e.destination,r=n.index,a=n.droppableId,s=c.index,o=c.droppableId,i=parseInt(a.replace("column-","")),u=parseInt(o.replace("column-",""));return t.map((function(e,n){if(u===n){var c=t[i].cards.splice(r,1),a=Object(O.a)(c,1)[0],o=Array.from(t[u].cards);o.splice(s,0,a),e.cards=o}return e}))},G=[{title:"ON HOLD",cards:[]},{title:"IN PROGRESS",cards:[]},{title:"NEEDS REVIEW",cards:[]},{title:"APPROVED",cards:[]}];var H={isAuth:!1};var M=Object(T.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(N.a)(Object(N.a)({},e),{},{isAuth:!0});case d:return localStorage.removeItem("token"),Object(N.a)(Object(N.a)({},e),{},{isAuth:!1});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U.d:return e.map((function(e,n){return Object(N.a)(Object(N.a)({},e),{},{cards:Object(L.a)(t.payload.filter((function(e){return e.row==="".concat(n)})))})}));case U.a:return e.map((function(e,n){return+t.payload.row===n?Object(N.a)(Object(N.a)({},e),{},{cards:[].concat(Object(L.a)(e.cards),[{id:t.payload.id,row:t.payload.row,seq_num:t.payload.seq_num,text:t.payload.text}])}):e}));case U.b:return e.map((function(e,n){return t.payload.columnIndex===n?Object(N.a)(Object(N.a)({},e),{},{cards:e.cards.filter((function(e,n){return n!==t.payload.cardIndex}))}):e}));case U.c:var n=t.payload,c=n.source,r=n.destination;return W({state:e,source:c,destination:r});default:return e}}}),B=Object(T.createStore)(M,Object(F.composeWithDevTools)(Object(T.applyMiddleware)(J.a)));a.a.render(Object(p.jsx)(i.a,{store:B,children:Object(p.jsx)(P,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.3af534f8.chunk.js.map